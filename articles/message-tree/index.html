<!DOCTYPE html><html lang="zh-hans"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="preload" href="/component---src-layouts-index-jsx-586884a80dcf6d22090b.js" as="script"/><link rel="preload" href="/component---src-templates-post-jsx-e43738fb749a9be89f94.js" as="script"/><link rel="preload" href="/path---articles-message-tree-41e5bec598974077bda6.js" as="script"/><link rel="preload" href="/app-1c8242ba64809c093520.js" as="script"/><link rel="preload" href="/commons-001b187d764b6f551a53.js" as="script"/><title data-react-helmet="true">封装一个基于Vue的留言评论编辑器组件 - 由作者孔令文发布于 2020-04-05</title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.bootcss.com/github-markdown-css/2.10.0/github-markdown.min.css"/><meta data-react-helmet="true" name="keyword" content="frontend,html,css, javascript,vue"/><meta data-react-helmet="true" name="description" content="A technology sharing blog"/><meta data-react-helmet="true" itemProp="name" content="封装一个基于Vue的留言评论编辑器组件 - 由作者孔令文发布于 2020-04-05"/><meta data-react-helmet="true" itemProp="description" content="封装通用的用户评论消息组件（Vue…"/><meta data-react-helmet="true" itemProp="image" content=""/><meta data-react-helmet="true" property="og:url" content="https://konglingwen94.github.io/articles/message-tree/"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="封装一个基于Vue的留言评论编辑器组件 - 由作者孔令文发布于 2020-04-05"/><meta data-react-helmet="true" property="og:description" content="封装通用的用户评论消息组件（Vue…"/><meta data-react-helmet="true" property="og:image" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="封装一个基于Vue的留言评论编辑器组件 - 由作者孔令文发布于 2020-04-05"/><meta data-react-helmet="true" name="twitter:description" content="封装通用的用户评论消息组件（Vue…"/><meta data-react-helmet="true" name="twitter:image" content=""/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css"/><style id="gatsby-inlined-css">.navbar-custom .nav-link,.navbar-custom .navbar-brand{font-weight:700;color:#fff}.navbar-custom .nav-item{margin:0 8px}.nav-link:hover{color:#ccc}.navbar-custom{transition:.3s;transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden}.navbar-custom.fixed-top{top:-60px}.navbar-custom.navbar--is-on-top{top:0}.navbar-custom.navbar--is-visible{top:0;background-color:hsla(0,0%,100%,.90196);box-shadow:0 0 40px rgba(0,0,0,.2)}.navbar-custom.navbar--is-visible .nav-link,.navbar-custom.navbar--is-visible .navbar-brand{color:#3d464d}.footer{padding:2em 0;margin-top:50px;font-size:12px;color:#999;background-color:#000}.footer ul{padding-left:0;list-style:none}.footer li{padding:24px 2em;line-height:1.8}.footer h2{font-size:14px;margin:0 auto 8px;font-weight:500}.footer a{color:#fff;cursor:pointer}.footer strong{font-weight:400}.tag{display:inline-block;border:1px solid #bfbfbf;margin-right:.6em;margin-bottom:.6em;border-radius:999em;font-size:12px;line-height:24px}.tag:last-child{margin-right:0}.tag__link{display:block;padding:0 1em;color:#bfbfbf;text-decoration:none}.tag:hover{border-color:#0056b3}.tag:hover .tag__link{color:#0056b3;text-decoration:none}.tag--full:hover{border-color:#0056b3;background-color:#0056b3}.tag--full:hover .tag__link{color:#fff;text-decoration:none}.tag--white{border-color:#fff}.tag--white .tag__link{color:#fff}.tag--white.tag--full:hover{border-color:hsla(0,0%,100%,.4);background-color:hsla(0,0%,100%,.4)}.tag--white.tag--full:hover .tag__link{color:#fff;text-decoration:none}.tag--custom-color .tag__link{color:#fff!important}.src-styles----post-module---post-heading---3XY_J{padding:150px 0;background:no-repeat 50%;background-color:gray;background-size:cover;background-image:linear-gradient(120deg,#2b488a,#ca3749)}.src-styles----post-module---post-heading__title---1-9YQ{margin:16px 0;font-size:54px;color:#fff}.src-styles----post-module---post-heading__meta---3katd{color:#fff}.src-styles----post-module---donation---1rPSR{padding:30px 0;border-top:1px solid #eee;border-bottom:1px solid #eee;text-align:center}.social-share{margin:24px 0}.src-styles----post-module---pager---3ag2f{margin-top:32px}.src-styles----post-module---pager__item---vNI-Q{display:block;padding:16px 24px;font-size:14px;border:1px solid #ddd;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;line-height:1.6;text-transform:uppercase;letter-spacing:1px;color:#404040;background-color:#fff}.src-styles----post-module---pager__item---vNI-Q:hover{color:#404040;background:#eceeef;text-decoration:none}.src-styles----post-module---pager__title---2ZGsj{font-weight:700}.src-styles----post-module---pager__tips---R2YkG{margin:0;color:gray}.src-styles----post-module---pager__item--disabled---XSQC6{color:#818a91;cursor:not-allowed;background-color:#fff}.src-styles----post-module---pager__item--disabled---XSQC6:hover{color:#818a91;background-color:#fff}.markdown-body .gatsby-highlight{position:relative;padding-top:38px;border-radius:6px;background-color:#21252b}.markdown-body .gatsby-highlight:before{position:absolute;top:0;left:0;float:left;width:100%;height:38px;content:attr(rel);padding:0 80px;line-height:38px;font-size:16px;font-family:Source Sans Pro,sans-serif;font-weight:700;text-indent:15px;color:#fff}.markdown-body .gatsby-highlight:after{position:absolute;top:0;left:20px;width:12px;height:12px;content:" ";margin-top:13px;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;border-radius:50%;background:#fc625d}.markdown-body .gatsby-highlight pre{background-color:#2d2d2d!important;color:#ccc;counter-reset:line-number -1}.markdown-body{margin:48px 0}.markdown-body p{line-height:28px;text-align:justify;color:#3e3e3e}.markdown-body.zh,.markdown-body.zh-cmn-Hans,.markdown-body.zh-cn{font-family:Helvetica Neue,Helvetica,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif}.intro-header{padding:150px 0;margin-bottom:32px;background:no-repeat 50%;background-size:cover;background-image:linear-gradient(120deg,#2b488a,#ca3749)}.intro-header__site-heading{font-size:80px;color:#fff}.intro-header__subheading{font-size:18px;color:#fff}.intro-header--small{padding:80px 0}.intro-header--small .intro-header__site-heading{font-size:48px}.section{border-bottom:1px solid rgba(0,0,0,.10196);margin-bottom:24px}.section:last-child{border-bottom:none}.section__title{padding-bottom:8px;font-size:16px;font-weight:700;text-transform:uppercase;color:gray}.section__title a{color:gray;text-decoration:none}.section__body{padding-bottom:16px}.short-about__avatar{width:100%;height:auth}.short-about__intro{margin:16px 0;font-size:14px;color:#bfbfbf}.sns{margin-bottom:0}.sns__link{color:#bfbfbf}.friend-links{margin:0}.friend-links__link{font-size:14px;color:#bfbfbf}.tagCloud{margin:32px 0}.post{padding:24px 8px;border-bottom:1px solid rgba(0,0,0,.10196)}.post__link{display:block}.post__link:hover{text-decoration:none}.post__link:hover .post__title{color:#366df0}.post__title{margin-bottom:.6em;font-size:26px;line-height:1.2;color:#3d464d}.post__title:hover{color:#366df0}.post__content-preview{font-size:14px;text-align:justify;color:#a3a3a3}.post__meta{margin-top:8px;margin-bottom:0;font-size:14px;color:#a3a3a3}.post--small .post__title{font-size:18px}.post--succinct .post__content-preview{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.post--succinct .post__meta{display:none}.post--succinct .post__link:hover .post__content-preview,.post--succinct .post__link:hover .post__title{color:#366df0}.post-block__heading{font-size:20px;color:#0085a1}.post-block__title{margin-left:6px;font-weight:300;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;line-height:1.7}.post-block__body{margin-left:16px;margin-bottom:24px}</style></head><body><div id="___gatsby"><div data-reactroot=""><nav class="navbar navbar-expand-sm fixed-top navbar-custom navbar--is-on-top"><div class="container"><div class="collapse navbar-collapse justify-content-between"><a class="navbar-brand" href="/">首页</a><ul class="nav navbar-nav navbar-right text-uppercase"><li class="nav-item"><a class="nav-link" href="/categories/">categories</a></li><li class="nav-item"><a class="nav-link" href="/tags/">Tags</a></li><li class="nav-item"><a class="nav-link" href="/about">about</a></li><li class="nav-item"><a class="nav-link" href="https://github.com/konglingwen94" target="_blank">GitHub</a></li></ul></div></div></nav><div><div class="src-styles----post-module---post-heading---3XY_J"><div class="container"><div class="row justify-content-md-center"><div class="col-10"><div class="tags ghost-tags"><div class="tag tag--full tag--white"><a class="tag__link" href="/tags#轮子">轮子</a></div></div><h1 class="src-styles----post-module---post-heading__title---1-9YQ">封装一个基于Vue的留言评论编辑器组件</h1><p class="src-styles----post-module---post-heading__meta---3katd">孔令文<!-- --> · <!-- -->2020-04-05</p></div></div></div></div><div class="container"><div class="row justify-content-md-center"><div class="col-10"><article class="markdown-body undefined"><h1>封装通用的用户评论消息组件（Vue）</h1>
<h2>组件功能</h2>
<p>大部分文章展示类的网站都有用户评论的功能，看了这么多的评论消息的你是不是也想封装一个通过的组件呢，以备用到的时候可以直接拿来复用。现在我们就简单概括一下这个组件的主要功能，</p>
<p>既然是评论消息组件，首先把用户已经评论过的消息展示出来是这个组件的基本功能，然后针对每一条消息还可以对他进行回复，这就好比现实世界中人们的交流一样，每个人发表了一段话，听到的人都可以进行回复，然后针对回复我们还可以进行回复，其实这是一个无限循环的交流过程，把这种现实中的场景放到程序中有一个专业的算法术语与之对应，那就是递归（recursive），不过现在的网站评论功能都只是展示两层的对话内容（评论和回复），今天我们要实现的是可以无限级的进行消息回复的一个功能组件。这个不仅是利用了递归的思想开发一个组件，而且当你遇到别的业务场景的时候一样可以复用这一套逻辑，比如要实现一个文件树的功能，其利用的也是数据递归的思想。那现在就让我们去封装这个组件吧!</p>
<h2>创建目录结构</h2>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">├── src<span class="token operator">/</span> 
│   ├── components<span class="token operator">/</span> <span class="token comment">//内部组建</span>
│   │   ├── message<span class="token operator">-</span>editor<span class="token punctuation">.</span>vue <span class="token comment">//评论编辑器</span>
│   │   ├── message<span class="token operator">-</span>group<span class="token punctuation">.</span>vue <span class="token comment">//评论列表</span>
│   │   └── message<span class="token operator">-</span>item<span class="token punctuation">.</span>vue  <span class="token comment">//单个评论</span>
│   ├── main<span class="token punctuation">.</span>js  <span class="token comment">//导出文件</span>
│   ├── main<span class="token punctuation">.</span>vue  <span class="token comment">//入口组建</span>
│   └── util<span class="token punctuation">.</span>js
├── test<span class="token operator">/</span>
├── <span class="token constant">README</span><span class="token punctuation">.</span>md
├── babel<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js
├── <span class="token keyword">package</span><span class="token punctuation">.</span>json
└── vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js</code></pre>
      </div>
<p>先创建好项目目录，然后把需要用到的内部组件也创建好，这样整个项目的骨架结构就搭建好了，接下来我们就开始功能的开发吧！</p>
<h2>组件拆分</h2>
<p>为了更好的实现组件模块化管理，这里把需要用到的功能组件都放到<code class="language-text">component</code>的目录里面，现在就介绍一下这些组件最终都实现了怎样的功能。</p>
<div class="gatsby-highlight">
      <pre class="language-html"><code class="language-html">&lt;!-- message-group.vue --&gt;

&lt;template&gt;
  &lt;div class=&quot;message-group&quot;&gt;
    &lt;ul&gt;
      &lt;li v-for=&quot;(item,index) in dataList&quot; :key=&quot;index&quot;&gt;
        &lt;message-item :data=&quot;item&quot;&gt;&lt;/message-item&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
export default {
  name: &quot;MessageGroup&quot;,
  props: {
    dataList: {
      type: Array,
      default: []
    }
  }
};
&lt;/script&gt;

&lt;style&gt;
ul,
li {
  list-style: none;
  margin: 0;
  padding: 0;
}
&lt;/style&gt;</code></pre>
      </div>
<p>这个<code class="language-text">message-group</code>组件其实就是对<code class="language-text">message-item.vue（具体实现方式后面会详细介绍）</code>组件的一个列表循环展示，他就是一个消息树容器组件，这里为了开发和展示的过程中让项目组件结构的语义化更强就把他单独抽离出来了，而且当我们在浏览器<code class="language-text">vue-devtool（vue项目开发中调试插件）</code>的选项面板中也能更清楚的看到每个组件所对应的视图是哪一块，这对于更好的组织组件结构是有好处的。下面用一个图片演示一下效果。</p>
<p><img src="https://github.com/konglingwen94/lite-blog/blob/master/screenshots/message-tree/Apr-11-2020%2021-09-43.gif?raw=true" alt="message-tree"></p>
<h2>Vue组件递归调用</h2>
<p>组件是可以在它们自己的模板中调用自身的。不过它们只能通过 name 选项来做这件事</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">name<span class="token operator">:</span> <span class="token string">'unique-name-of-my-component'</span></code></pre>
      </div>
<p>当你使用 Vue.component 全局注册一个组件时，这个全局的 ID 会自动设置为该组件的 name 选项。</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'unique-name-of-my-component'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>稍有不慎，递归组件就可能导致无限循环：</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">name<span class="token operator">:</span> <span class="token string">'stack-overflow'</span><span class="token punctuation">,</span>
template<span class="token operator">:</span> <span class="token string">'&lt;div>&lt;stack-overflow>&lt;/stack-overflow>&lt;/div>'</span></code></pre>
      </div>
<p>类似上述的组件将会导致“max stack size exceeded”错误，所以请确保递归调用是条件性的 (例如使用一个最终会得到 false 的 v-if)。我们需要定义一个什么样的条件呢？如果给每一个被自身调用的递归组件打上一个层级深度的标志位（level），然后通过判断这个<code class="language-text">level</code>的值来控制组件调用是不是就可以了。现在我们重写改写一下代码</p>
<div class="gatsby-highlight">
      <pre class="language-html"><code class="language-html">&lt;!-- `my-component.vue` --&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;!-- my-component 需要全局注册，这里省略注册的代码 --&gt;

    &lt;my-component v-if=&quot;level===renderLevel&quot;&gt;&lt;/my-component&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name:&#39;my-component&#39;,
  inject:{
    level:{
      default:1
    }
  },
  provide(){
    return {
      level:this.level+1
    }
  },
  data(){
    return {
      renderLevel:1
    }
  }

}
&lt;/script&gt;</code></pre>
      </div>
<p>我们先是通过Vue提供的组件选项<code class="language-text">provide</code>和<code class="language-text">inject</code>这两个配置项给每一个递归被调用的组件标注了一个层级<code class="language-text">level</code>,然后在组件内部定义一个<code class="language-text">renderLevel</code>的状态，通过判断需要展示的组件层级是否满足条件来终止递归组件的调用.</p>
<blockquote>
<p>有关<code class="language-text">provide</code>和<code class="language-text">inject</code>组合项的详细介绍请查看<a href="https://cn.vuejs.org/v2/api/#provide-inject">官网</a></p>
</blockquote>
<h2>留言消息组件的实现</h2>
<p>从上面图片的最终演示效果可以看到，父留言里面会包含若干个回复评论，他们的样式和功能几乎是一样的，所以我们可以把它抽离成一个组件，这个组件又会递归的调用其自身，最终就有了一个消息树的效果。下面就把完整的代码展示出来看看具体是怎么实现的</p>
<div class="gatsby-highlight">
      <pre class="language-html"><code class="language-html">&lt;!-- message-item.vue --&gt;
&lt;template&gt;
  &lt;dl&gt;
    &lt;dt&gt;
      &lt;div class=&quot;avatar-wrapper&quot;&gt;
        &lt;el-avatar :src=&quot;data.avatar&quot;&gt;&lt;/el-avatar&gt;
      &lt;/div&gt;
      &lt;div class=&quot;message-wrapper&quot;&gt;
        &lt;div class&gt;
          &lt;span class=&quot;nickname&quot;&gt;{{data.nickname}}&lt;/span&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;
          &lt;time&gt;{{new Date(data.createdAt) | dateFormat}}&lt;/time&gt;
        &lt;/div&gt;

        &lt;p class=&quot;content&quot;&gt;
          {{data.content}}
          &lt;span
            v-if=&quot;data.replyToUser&quot;
          &gt;//@{{data.replyToUser.nickname}}:{{data.replyToUser.content}}&lt;/span&gt;
        &lt;/p&gt;
        &lt;div class=&quot;footer-action&quot;&gt;
          &lt;div class=&quot;message-statis&quot;&gt;
            &lt;el-button type=&quot;text&quot; @click=&quot;replyHandler&quot;&gt;回复&lt;/el-button&gt;
            &lt;el-button
              v-if=&quot;data.children &amp;&amp; data.children.length&quot;
              type=&quot;text&quot;
              @click=&quot;toggleExpandPanel&quot;
            &gt;
              {{isExpanded?`收起回复`:`${replyCount}条回复`}}
              &lt;i
                :class=&quot;!isExpanded?&#39;el-icon-arrow-down&#39;:&#39;el-icon-arrow-up&#39;&quot;
              &gt;&lt;/i&gt;
            &lt;/el-button&gt;
          &lt;/div&gt;
          &lt;div class=&quot;append-right&quot;&gt;
            &lt;span class=&quot;thumb-button&quot;&gt;
              {{data.thumbupCount}}
              &lt;i class=&quot;el-icon-thumb&quot; @click=&quot;thumbClicked(data)&quot;&gt;&lt;/i&gt;
            &lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;editor-container&quot; ref=&quot;editorContainer&quot;&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/dt&gt;
    &lt;!-- &lt;el-divider v-if=&quot;level===1&quot;&gt;&lt;/el-divider&gt; --&gt;
    &lt;el-collapse-transition&gt;
      &lt;dd class=&quot;reply-container&quot; v-show=&quot;isExpanded&quot; v-if=&quot;replyCount&quot; ref=&quot;messageTreeContainer&quot;&gt;
        &lt;message-group :dataList=&quot;data.children&quot;&gt;&lt;/message-group&gt;
        &lt;!-- &lt;div class=&quot;loading-more&quot; @click=&quot;loadMore&quot; v-if=&quot;replyCount&gt;=1&quot;&gt;查看更多&lt;/div&gt; --&gt;
      &lt;/dd&gt;
    &lt;/el-collapse-transition&gt;
  &lt;/dl&gt;
&lt;/template&gt;
&lt;script&gt;
// import _ from &#39;lodash&#39;
import { dateFormat } from &#39;../util&#39;

export default {
  name: &#39;MessageItem&#39;,

  inject: {
    level: {
      default: 1
    },
    $editor: &#39;$editor&#39;,
    $messageTree: &#39;$messageTree&#39;
  },

  provide() {
    return {
      level: this.level + 1
    }
  },
  data() {
    return {
      isExpanded: this.$messageTree.expandLayer &gt; this.level,
      hasEditor: false
    }
  },
  mounted() {
    const self = this
    this.$refs.editorContainer.addEventListener(&#39;DOMNodeInserted&#39;, function(e) {
      if (e.target === self.$editor &amp;&amp; e.relatedNode === this) {
        self.hasEditor = true
      }
    })
    this.$refs.editorContainer.addEventListener(&#39;DOMNodeRemoved&#39;, function(e) {
      if (e.target === self.$editor &amp;&amp; e.relatedNode === this) {
        self.hasEditor = false
      }
    })
  },
  filters: {
    dateFormat
  },
  watch: {
    &#39;$messageTree.expandLayer&#39;: function(value) {
      this.isExpanded = value &gt; this.level
    },
    isExpanded(value) {
      this.$messageTree.$emit(&#39;tree-expanded&#39;, this.data, value)

      if (!value) {
        if (!this.$refs.messageTreeContainer.contains(this.$editor)) {
          return
        }
        this.$editor.remove()
      }
    }
  },
  props: {
    data: {
      type: Object,
      default: () =&gt; ({})
    }
  },
  computed: {
    replyCount() {
      return this.data.children &amp;&amp; this.data.children.length
    }
  },

  methods: {
    loadMore() {
      const payload = { ...this.data }
      delete payload.children
      this.$emit(&#39;load-more&#39;, payload)
    },
    thumbClicked(item) {
      this.$messageTree.$emit(&#39;on-thumbup&#39;, item)
    },
    replyHandler() {
      if (!this.$refs.editorContainer.contains(this.$editor)) {
        this.$messageTree.showEditor()
        this.$refs.editorContainer.appendChild(this.$editor)
      }

      if (this.$messageTree.editorType === &#39;default&#39;) {
        this.$nextTick(() =&gt; {
          // this.$messageTree.$refs.textarea.focus()
        })
      } else {
        const payload = {
          ...this.data
        }

        delete payload.children
      this.$messageTree.$emit(&#39;on-reply&#39;, payload)
      }
    },
    toggleExpandPanel() {
      this.isExpanded = !this.isExpanded
    }
  }
}
&lt;/script&gt;
&lt;style lang=&quot;less&quot; scoped&gt;
@duration: 300ms;

dt {
  display: flex;
  .avatar-wrapper {
    margin-right: 8px;
  }
  .message-wrapper {
    width: 100%;
    font-size: 14px;

    time {
      color: #909399;
      vertical-align: middle;
    }
    .footer-action {
      display: flex;
      justify-content: space-between;
      align-items: center;
      .append-right {
        .thumb-button {
          color: #409eff;
          cursor: pointer;
        }
      }
    }
  }
}
dd.reply-container {
  background: #fafbfc;
  padding: 20px;
  margin-top: 20px;
}
.loading-more {
  user-select: none;
  text-align: center;
  font-size: 14px;
  color: #444;
  cursor: pointer;
}

.message-reply-enter,
.message-reply-leave-to {
  transform: translateX(-100%);
}
.message-reply-active {
  transition: all @duration;
}
.message-reply-move {
  transition: all @duration;
}
.message-reply-item {
  transition: all @duration;
}
&lt;/style&gt;</code></pre>
      </div>
<h2>最终效果</h2>
<p><img src="https://github.com/konglingwen94/message-tree/raw/master/screenshots/1.gif" alt="message-tree">
<img src="https://github.com/konglingwen94/message-tree/raw/master/screenshots/2.gif" alt="message-tree"></p>
<h2>总结</h2>
<p>通过对留言消息树组件的封装，我们对编程算法中递归的使用有了更深入的了解。递归不仅在数据处理时会用到，在展示视图的场景下依然有很大的用处，这样组件的递归展现视图的方式会让我们的代码更干净，更便于维护，同时还有更好的逻辑复用能力。文章的最后附上本项目的<a href="https://github.com/konglingwen94/message-tree">Github地址</a></p>
<blockquote>
<p>备注：本片博文属于作者原创，转载请注明出处，谢谢!</p>
</blockquote></article><div class="src-styles----post-module---donation---1rPSR"><h3 class="mb-3">您的鼓励是作者写作最大的动力</h3><p>如果您认为本网站的文章质量不错，读后觉得收获很大，不妨请我喝杯咖啡，让我有动力继续写出高质量的文章。</p><a href="https://cdn-images-1.medium.com/max/1600/1*PZjwR1Nbluff5IMI6Y1T6g@2x.png" class="btn btn-primary mr-2" target="_blank">支付宝打赏</a></div><div class="social-share" data-disabled="diandian"></div><hr/><ul class="src-styles----post-module---pager---3ag2f row justify-content-between text-center list-inline"><li class="col list-inline-item"><a class="src-styles----post-module---pager__item---vNI-Q undefined" title="实现Javascript对象的深拷贝" href="/articles/deep-clone-object/"><div class="src-styles----post-module---pager__title---2ZGsj">Previous</div><p class="src-styles----post-module---pager__tips---R2YkG">实现Javascript对象的深拷贝</p></a></li><li class="col list-inline-item"><a class="src-styles----post-module---pager__item---vNI-Q undefined" title="封装一个自己的轮播图组件（基于 Vue）" href="/articles/good-swiper/"><div class="src-styles----post-module---pager__title---2ZGsj">Next</div><p class="src-styles----post-module---pager__tips---R2YkG">封装一个自己的轮播图组件（基于 Vue）</p></a></li></ul></div></div></div></div><footer class="footer"><div class="container"><div><ul class="row"><li class="col-md-3"><h2>友情链接</h2><div><a href="https://github.com/konglingwen94" target="_blank">GitHub</a></div><div><a href="https://www.zhihu.com/people/kong-ling-wen-55" target="_blank">FETalk</a></div></li><li class="col-md-3"><h2>Open Source</h2><div><a href="https://github.com/konglingwen94" target="_blank">konglingwen94.github.io</a></div><div><a href="https://github.com/konglingwen94/vue-music" target="_blank">vue-music</a></div><div><a href="https://github.com/konglingwen94/element-resize-event-polyfill" target="_blank">element-resize-event-polyfill</a></div><div><a href="https://github.com/konglingwen94/anydirectory" target="_blank">anydirectory</a></div><div><a href="https://github.com/konglingwen94/egg-nuxt-blog" target="_blank">egg-nuxt</a></div></li><li class="col-md-3"><h2>联系方式</h2><div><a href="javascript:;">Mail</a> - <!-- -->794430774@qq.com</div></li><li class="col-md-3"><h2>内容许可</h2><div>除特别说明外，本站所有内容均采用<!-- --> <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh" target="_blank">署名-非商业性使用-禁止演绎 4.0 国际 (CC BY-NC-ND 4.0)</a> <!-- -->进行许可。</div></li></ul></div></div></footer></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-1c8242ba64809c093520.js","213130420965792":"component---src-templates-post-jsx-e43738fb749a9be89f94.js","162898551421021":"component---src-pages-404-js-95a1f313704a919edcae.js","144251824217401":"component---src-pages-about-jsx-a25b5d9428065f0a71aa.js","142542727794042":"component---src-pages-categories-jsx-878ebe776c503198a6a5.js","213534597649335":"component---src-pages-index-jsx-71fe515fc9d09c74b252.js","36530248567819":"component---src-pages-tags-jsx-0a1905a7f389a97ea16d.js","60335399758886":"path----a60750dfe0c706a2a72e.js","17444338437003":"path---articles-deep-clone-object-e964a98d77914d23b98d.js","90083593868317":"path---articles-message-tree-41e5bec598974077bda6.js","225127983765984":"path---articles-good-swiper-e0b5785da8518c9f5036.js","213664192171304":"path---articles-comment-editor-44053b206a38d90112f7.js","170008255791881":"path---articles-element-resize-event-polyfill-0fbad59f3f2060ff5234.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","273950069227526":"path---about-eee9eae25668dde7632e.js","30875753179511":"path---categories-6745b3e354cdd0acb424.js","142629428675168":"path---index-bf523b8551337cdc0727.js","55702396619907":"path---tags-6745b3e354cdd0acb424.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","79611799117203":"component---src-layouts-index-jsx-586884a80dcf6d22090b.js"}/*]]>*/</script><script>/*<![CDATA[*/["/commons-001b187d764b6f551a53.js","/app-1c8242ba64809c093520.js","/path---articles-message-tree-41e5bec598974077bda6.js","/component---src-templates-post-jsx-e43738fb749a9be89f94.js","/component---src-layouts-index-jsx-586884a80dcf6d22090b.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>